{"version":3,"file":"vue.js","sources":["../src/index.js"],"sourcesContent":["function Vue(options){\r\n   const vm = this;\r\n   vm.$options = options\r\n   vm._data = typeof options.data === 'function' ? options.data() : options.data\r\n\r\n   _proxy.call(vm,vm._data)\r\n   observe(vm._data)\r\n}\r\n\r\n// 代理,代理这里是不可以defineReactive()会导致取值复制失效\r\nfunction _proxy(data){\r\n    // 箭头函数内的this,是外层的this\r\n    Object.keys(data).forEach(key =>{\r\n       const _this = this\r\n        console.log('外层的this',this);\r\n        Object.defineProperty(this,key,{\r\n            get(){\r\n                console.log('内层的this',this);\r\n                console.log(this === _this)\r\n                return data[key]\r\n            },\r\n            set(newData){\r\n                // 这里是一定要data[key]\r\n               data[key] = newData\r\n               console.log('代理里面也改变了？',data[key]);\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nfunction observe(data,cb){\r\n    //  对每一个键值操作\r\n    for (const [key,value] of Object.entries(data)) {\r\n        defineReactive(data,key,value,cb)\r\n    }\r\n}\r\n\r\n\r\nfunction defineReactive(obj,key,val,cb){\r\n    // obj中的每一个key 都有 闭包val\r\n    Object.defineProperty(obj,key,{\r\n       get(){\r\n        console.log(`在获取${obj}的值${key}`);\r\n        return val\r\n       },\r\n       set(newValue){\r\n        console.log(`在这里改变了${val}`)\r\n        val = newValue\r\n        cb && cb()\r\n       }\r\n        \r\n    })\r\n\r\n}\r\n\r\nexport default Vue;"],"names":["Vue","options","vm","$options","_data","data","_proxy","call","observe","Object","keys","forEach","key","_this","console","log","defineProperty","get","set","newData","cb","value","entries","defineReactive","obj","val","newValue"],"mappings":";;;;;;GAAA,SAASA,GAAGA,CAACC,OAAO,EAAC;KAClB,MAAMC,EAAE,GAAG,IAAI,CAAA;KACfA,EAAE,CAACC,QAAQ,GAAGF,OAAO,CAAA;GACrBC,EAAAA,EAAE,CAACE,KAAK,GAAG,OAAOH,OAAO,CAACI,IAAI,KAAK,UAAU,GAAGJ,OAAO,CAACI,IAAI,EAAE,GAAGJ,OAAO,CAACI,IAAI,CAAA;KAE7EC,MAAM,CAACC,IAAI,CAACL,EAAE,EAACA,EAAE,CAACE,KAAK,CAAC,CAAA;GACxBI,EAAAA,OAAO,CAACN,EAAE,CAACE,KAAK,CAAC,CAAA;GACpB,CAAA;;GAEA;GACA,SAASE,MAAMA,CAACD,IAAI,EAAC;GACjB;KACAI,MAAM,CAACC,IAAI,CAACL,IAAI,CAAC,CAACM,OAAO,CAACC,GAAG,IAAG;OAC7B,MAAMC,KAAK,GAAG,IAAI,CAAA;GACjBC,IAAAA,OAAO,CAACC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,CAAA;GAC3BN,IAAAA,MAAM,CAACO,cAAc,CAAC,IAAI,EAACJ,GAAG,EAAC;GAC3BK,MAAAA,GAAGA,GAAE;GACDH,QAAAA,OAAO,CAACC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,CAAA;GAC3BD,QAAAA,OAAO,CAACC,GAAG,CAAC,IAAI,KAAKF,KAAK,CAAC,CAAA;WAC3B,OAAOR,IAAI,CAACO,GAAG,CAAC,CAAA;UACnB;SACDM,GAAGA,CAACC,OAAO,EAAC;GACR;GACDd,QAAAA,IAAI,CAACO,GAAG,CAAC,GAAGO,OAAO,CAAA;WACnBL,OAAO,CAACC,GAAG,CAAC,WAAW,EAACV,IAAI,CAACO,GAAG,CAAC,CAAC,CAAA;GACrC,OAAA;GACJ,KAAC,CAAC,CAAA;GACN,GAAC,CAAC,CAAA;GACN,CAAA;GAEA,SAASJ,OAAOA,CAACH,IAAI,EAACe,EAAE,EAAC;GACrB;GACA,EAAA,KAAK,MAAM,CAACR,GAAG,EAACS,KAAK,CAAC,IAAIZ,MAAM,CAACa,OAAO,CAACjB,IAAI,CAAC,EAAE;OAC5CkB,cAAc,CAAClB,IAAI,EAACO,GAAG,EAACS,KAAK,EAACD,EAAE,CAAC,CAAA;GACrC,GAAA;GACJ,CAAA;GAGA,SAASG,cAAcA,CAACC,GAAG,EAACZ,GAAG,EAACa,GAAG,EAACL,EAAE,EAAC;GACnC;GACAX,EAAAA,MAAM,CAACO,cAAc,CAACQ,GAAG,EAACZ,GAAG,EAAC;GAC3BK,IAAAA,GAAGA,GAAE;SACJH,OAAO,CAACC,GAAG,CAAE,CAAA,GAAA,EAAKS,GAAI,CAAIZ,EAAAA,EAAAA,GAAI,EAAC,CAAC,CAAA;GAChC,MAAA,OAAOa,GAAG,CAAA;QACV;OACDP,GAAGA,CAACQ,QAAQ,EAAC;GACZZ,MAAAA,OAAO,CAACC,GAAG,CAAE,CAAQU,MAAAA,EAAAA,GAAI,EAAC,CAAC,CAAA;GAC3BA,MAAAA,GAAG,GAAGC,QAAQ,CAAA;SACdN,EAAE,IAAIA,EAAE,EAAE,CAAA;GACX,KAAA;GAEH,GAAC,CAAC,CAAA;GAEN;;;;;;;;"}